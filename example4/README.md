# LangGraph Example 4: Human-in-the-Loop Workflow ğŸ¤

ì´ ì˜ˆì œëŠ” LangGraphë¥¼ ì‚¬ìš©í•˜ì—¬ AIì™€ ì‚¬ëŒì´ í˜‘ì—…í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì´ë‚˜ ê²€í† ê°€ í•„ìš”í•œ ê²½ìš° ì‚¬ëŒì˜ ìŠ¹ì¸ì„ ë°›ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥ ğŸ¯

1. ì‹¤ì‹œê°„ ì‚¬ëŒ ê°œì…
   - AIê°€ ì¤‘ìš”í•œ ê²°ì •ì—ì„œ ì‚¬ëŒì˜ ìŠ¹ì¸ì„ ìš”ì²­
   - `interrupt` ê¸°ëŠ¥ì„ í†µí•œ ì›Œí¬í”Œë¡œìš° ì¼ì‹œ ì¤‘ì§€
   - ì‚¬ëŒì˜ ì‘ë‹µì— ë”°ë¥¸ ì²˜ë¦¬ ì¬ê°œ

2. ë„êµ¬ í†µí•©
   - ì›¹ ê²€ìƒ‰ ë„êµ¬ (Tavily)
   - ì‚¬ëŒ ë„ì›€ ìš”ì²­ ë„êµ¬ (`human_assistance`)

3. ìƒíƒœ ê´€ë¦¬
   - `MemorySaver`ë¥¼ í†µí•œ ëŒ€í™” ìƒíƒœ ìœ ì§€
   - ì¤‘ë‹¨ëœ ìƒíƒœì—ì„œì˜ ë³µêµ¬ ê°€ëŠ¥

## ì„¤ì¹˜ ë°©ë²• âš™ï¸

```bash
# í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install langchain langgraph langchain-openai python-dotenv

# .env íŒŒì¼ ì„¤ì •
OPENAI_API_KEY=your-openai-api-key
TAVILY_API_KEY=your-tavily-api-key
```

## ì‚¬ìš© ì˜ˆì‹œ ğŸ’¡

```python
# ê¸°ë³¸ ì‚¬ìš©
test_chatbot(graph, "ì´ ì½”ë“œê°€ ì•ˆì „í•œê°€ìš”?")

# ì¶œë ¥ ì˜ˆì‹œ
ğŸ˜€ ì‚¬ìš©ì: ì´ ì½”ë“œê°€ ì•ˆì „í•œê°€ìš”?
ğŸ¤– AI: ì½”ë“œë¥¼ ê²€í† í•˜ê¸° ìœ„í•´ ì „ë¬¸ê°€ì˜ ë„ì›€ì„ ìš”ì²­í•˜ê² ìŠµë‹ˆë‹¤.
ğŸ‘‹ ì‚¬ëŒì˜ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤!
ì‘ë‹µì„ ì…ë ¥í•˜ì„¸ìš”: ì´ ì½”ë“œëŠ” ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
```

## í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ğŸ§ª

1. ì½”ë“œ ì•ˆì „ì„± ê²€í† 
   ```
   ì´ ì½”ë“œê°€ ì•ˆì „í•œì§€ ê²€í† í•´ì£¼ì„¸ìš”: import os; os.system('rm -rf /')
   ```

2. ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ìŠ¹ì¸
   ```
   ì¤‘ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚­ì œí•˜ë ¤ê³  í•˜ëŠ”ë° í™•ì¸í•´ì£¼ì„¸ìš”
   ```

3. ê¸ˆìœµ ê±°ë˜ ìŠ¹ì¸
   ```
   ì´ ê±°ë˜ë¥¼ ìŠ¹ì¸í•´ë„ ë ê¹Œìš”? ê¸ˆì•¡: $10,000
   ```

## ì£¼ìš” êµ¬ì„± ìš”ì†Œ ì„¤ëª… ğŸ“š

1. `human_assistance` ë„êµ¬
```python
@tool
def human_assistance(query: str) -> str:
    """ì‚¬ëŒì˜ ë„ì›€ì„ ìš”ì²­í•©ë‹ˆë‹¤."""
    human_response = interrupt({"query": query})
    return human_response["data"]
```

2. ìƒíƒœ ê´€ë¦¬
```python
class State(TypedDict):
    messages: Annotated[list, add_messages]
```

## ì£¼ì˜ì‚¬í•­ âš ï¸

1. API í‚¤ ì„¤ì •
   - OpenAI API í‚¤ í•„ìš”
   - Tavily API í‚¤ í•„ìš”

2. ì‹¤í–‰ í™˜ê²½
   - Python 3.9 ì´ìƒ í•„ìš”
   - ì¸í„°ë„· ì—°ê²° í•„ìš”

3. ì‚¬ìš© ì œí•œ
   - API í˜¸ì¶œ ë¹„ìš© ë°œìƒ ê°€ëŠ¥
   - ì‹¤ì‹œê°„ ì‘ë‹µ í•„ìš”

## í™•ì¥ ê°€ëŠ¥ì„± ğŸš€

1. ì¶”ê°€ ê¸°ëŠ¥
   - ì›¹ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
   - ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ ë‹¤ì–‘í™”
   - ë¡œê¹… ì‹œìŠ¤í…œ ì¶”ê°€

2. ì»¤ìŠ¤í„°ë§ˆì´ì§•
   - ë‹¤ì–‘í•œ ë„êµ¬ ì¶”ê°€
   - ìŠ¹ì¸ ì¡°ê±´ ì„¤ì •
   - ì‘ë‹µ í˜•ì‹ ë³€ê²½

## ì°¸ê³  ìë£Œ ğŸ“–

- [LangGraph ê³µì‹ ë¬¸ì„œ](https://python.langchain.com/docs/langgraph)
- [Human-in-the-Loop íŒ¨í„´](https://python.langchain.com/docs/langgraph/patterns)
- [Tool Calling ê°€ì´ë“œ](https://python.langchain.com/docs/modules/model_io/tools)